# ==========================================
# 🚀 CRYPTO AI BOT - 15-MINUTE CONFIGURATION
# ==========================================
# Optimized for swing trading on 15-minute timeframe
# More reliable signals, less noise, bigger profit targets

# ==========================================
# 🎯 TRADING MODE
# ==========================================
MODE=live
DRY_RUN=false
TESTNET=true
SAVE_REPORTS=true
LOG_LEVEL=INFO
# ==========================================
# 🔑 API CREDENTIALS (BINANCE)
# ==========================================
BINANCE_API_KEY=9LNERWnjPfWAOgOg0NutwOxTfJQ0hxRriwSR5TxiOaynMGBGQDogLrWXHJPUQ6Er
BINANCE_API_SECRET=dHbRqihth7jYTsetfbBhuz1dmi2w4X533No2s2g7zGs2CZHlZ5tcWiXj0lAFplKT

# ==========================================
# 📊 TRADING PARAMETERS
# ==========================================
# Multi-symbol trading (10 major pairs)
SYMBOLS=BTCUSDT,ETHUSDT,BNBUSDT,SOLUSDT,ADAUSDT,XRPUSDT,DOGEUSDT,AVAXUSDT,LINKUSDT,MATICUSDT

# 15-minute timeframe for swing trading
TIMEFRAME=15m

# Backtest settings
BACKTEST_DAYS=90

# ==========================================
# 💰 RISK MANAGEMENT (AGGRESSIVE FOR 15m)
# ==========================================
# Higher leverage for 15m timeframe (more stable than 1m)
LEVERAGE=10

# Risk per trade: 1% (doubled from 1m due to higher confidence)
RISK_PER_TRADE_PCT=3.0

# Max daily loss: 8% (more room for swing trades)
MAX_DAILY_LOSS_PCT=8.0

# Minimum order size
MIN_NOTIONAL_USDT=10.0

# Fees (Binance Futures)
TAKER_FEE=0.0004
MAKER_FEE=0.0002
SLIPPAGE_BPS=5

# ==========================================
# 🎯 IMBA SIGNAL PARAMETERS (15m OPTIMIZED)
# ==========================================
# Minimum ADX for trend following (higher for 15m)
MIN_ADX=30.0

# Minimum confidence for trade entry (slightly lower - 15m more reliable)
BT_CONF_MIN=1.2

# Minimum BB Width (volatility filter)
BT_BBW_MIN=0.005

# Signal cooldown: 5 minutes (300s) - avoid overtrading on 15m
COOLDOWN_SEC=300

# Anti-flip cooldown: 3 minutes (180s)
ANTI_FLIP_SEC=180

# VWAP band percentage (wider for 15m)
VWAP_BAND_PCT=0.008

# EMA pinch quantile (for convergence detection)
EMA_PINCH_Q=0.12

# ==========================================
# 📈 REGIME DETECTION (15m THRESHOLDS)
# ==========================================
# Trend regime: ADX > 30 (stronger trends on 15m)
TREND_ADX_THRESHOLD=30.0

# Flat regime: ADX < 25
FLAT_ADX_THRESHOLD=25.0

# Trend BBW threshold (higher volatility on 15m)
TREND_BBW_THRESHOLD=0.015

# Flat BBW threshold
FLAT_BBW_THRESHOLD=0.008

# ==========================================
# 🔄 DCA SETTINGS (AGGRESSIVE)
# ==========================================
# DCA ladder: entries at -1%, -2%, -3.5%
DCA_LADDER=-1.0:1.5,-2.0:2.0,-3.5:2.5

# Enable adaptive DCA
ADAPTIVE_DCA=true

# DCA trend ADX threshold
DCA_TREND_ADX=30.0

# Disable DCA in strong trends (let winners run)
DCA_DISABLE_ON_TREND=true

# Maximum DCA levels
MAX_LEVELS=5

# DCA position size multiplier
DCA_MULTIPLIER=1.5

# Spacing between DCA levels (%)
LEVEL_SPACING_PCT=2.0

# ==========================================
# 🛡️ STOP LOSS & TAKE PROFIT (15m OPTIMIZED)
# ==========================================
# Fixed stop loss: 2% (wider for 15m swings)
SL_FIXED_PCT=2.0

# ATR-based stop loss multiplier
SL_ATR_MULT=2.0

# Take profit levels (R:R ratios)
TP_LEVELS=1.2,1.8,2.3

# TP shares (% of position to close at each level)
TP_SHARES=0.30,0.40,0.30

# Break-even trigger (move SL to entry after +1R)
BE_TRIGGER_R=1.0

# Trailing stop enabled
TRAIL_ENABLE=true

# Trailing stop ATR multiplier
TRAIL_ATR_MULT=1.5

# ==========================================
# 🎯 EXIT ORDER MANAGEMENT
# ==========================================
PLACE_EXITS_ON_EXCHANGE=true
EXIT_WORKING_TYPE=MARK_PRICE
EXIT_REPLACE_EPS=0.005
EXIT_REPLACE_COOLDOWN=60
MIN_TP_NOTIONAL_USDT=10.0
EXITS_ENSURE_INTERVAL=30

# ==========================================
# 🤖 ML MODELS (OPTIONAL)
# ==========================================
LSTM_ENABLE=true
LSTM_INPUT=20
SEQ_LEN=50
LSTM_SIGNAL_THRESHOLD=0.002

GPT_ENABLE=false
GPT_API_URL=http://127.0.0.1:1234
GPT_MODEL=openai/gpt-oss-20b
GPT_MAX_TOKENS=200
GPT_INTERVAL=30
GPT_TIMEOUT=20

# ==========================================
# 📡 WEBSOCKET (ORDER BOOK)
# ==========================================
WS_ENABLE=true
WS_DEPTH_LEVEL=10
WS_DEPTH_INTERVAL=1000
OBI_ALPHA=0.65
OBI_THRESHOLD=0.20

# ==========================================
# 🧠 SELF-LEARNING SYSTEM (OPTIONAL)
# ==========================================
ENABLE_TRADE_JOURNAL=true
ENABLE_ADAPTIVE_OPTIMIZER=true
ENABLE_REALTIME_ADAPTATION=true
OPTIMIZATION_INTERVAL_HOURS=48
MIN_TRADES_FOR_OPTIMIZATION=15
PAUSE_ON_LOSS_STREAK=4

# ==========================================
# 💾 DATA LOADING
# ==========================================
# Preload 500 candles on startup (7.5 days of 15m data)
PRELOAD_CANDLES=1200

# Signal cooldown: 5 minutes between signals per symbol
SIGNAL_COOLDOWN_SECONDS=300

# ==========================================
# 🎨 IMBA FILTERS & MARKET INFLUENCE
# ==========================================
# Funding rate filter threshold
FUNDING_FILTER_THRESHOLD=0.15

# Liquidation notional threshold (5M USDT)
LIQUIDATION_NOTIONAL_THRESHOLD=5000000

# Volume ratio filter (min 60% of avg)
VOLUME_MIN_RATIO=0.6

# Volatility ratio filters
VOLATILITY_MIN_RATIO=0.4
VOLATILITY_MAX_RATIO=2.5

# Altcoin symbols for market bias
ALT_SYMBOLS=ETHUSDT,BNBUSDT,SOLUSDT,AVAXUSDT,LINKUSDT

# Altcoin influence weight
ALT_INFLUENCE=0.40

# ==========================================
# 🚀 IMBA RESEARCH SIGNALS
# ==========================================
# Enable IMBA signal aggregation (9 advanced signals)
USE_IMBA_SIGNALS=true

# ==========================================
# 📢 NOTIFICATIONS (OPTIONAL)
# ==========================================
TG_BOT_TOKEN=
TG_CHAT_ID=

# ==========================================
# 📁 FILE PATHS
# ==========================================
KL_PERSIST=data/klines_15m.csv
TRADES_PATH=data/trades_15m.csv
EQUITY_PATH=data/equity_15m.csv
RESULTS_PATH=data/results_15m.csv
STATE_PATH=data/state_15m.json

# ==========================================
# 📊 RECOMMENDED SETTINGS FOR 15-MINUTE
# ==========================================
# 
# ✅ PROS:
# - More reliable signals (less noise)
# - Better risk/reward ratios
# - Stronger trend confirmation
# - Less stress (4 signals/hour vs 30/hour)
# - Bigger profit targets (2-4% vs 0.5-1%)
# 
# ⚡ RECOMMENDED LEVERAGE:
# - Conservative: 5x-7x
# - Moderate: 8x-12x (CURRENT)
# - Aggressive: 15x-20x
# 
# 🎯 EXPECTED PERFORMANCE:
# - Signals per day: 20-40
# - Win rate: 55-65%
# - Avg profit: +2.5%
# - Avg loss: -1.5%
# - R:R ratio: 1:1.6
# - Daily P&L: +3-8%
# 
# ==========================================

# CoinMarketCap API Key (optional)
# Get your FREE API key at: https://coinmarketcap.com/api/
# Free tier: 10,000 calls/month (333/day)
CMC_API_KEY=your-api-key-here

# Emergency Stop Loss (optional, default: 20.0)
# Automatically halts all trading if account equity drops by this percentage
# Example: 20.0 means bot stops if you lose 20% of initial equity
# Prevents catastrophic losses like the -300% incident
EMERGENCY_STOP_LOSS_PCT=20.0

# Leverage-Optimized Take Profit Configuration
# TP levels automatically scaled by leverage for realistic profit targets:
# 5x leverage: 2%, 4.5%, 8% price moves = 10%, 22.5%, 40% profits
# 10x leverage: 1.5%, 3.5%, 6% price moves = 15%, 35%, 60% profits
# Note: TP levels are calculated dynamically based on leverage in runner/live.py






